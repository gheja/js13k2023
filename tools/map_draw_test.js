"use strict";

function drawInit()
{
    /** @type HTMLCanvasElement */ let canvas = document.getElementById("canvas1")
    /** @type CanvasRenderingContext2D */ let ctx  = canvas.getContext("2d")

    canvas.width = 1000
    canvas.height = 1000

    ctx.clearRect(0, 0, 1000, 1000)
}

function drawArrayFuzzy(arr, color = "#ccc")
{
    let fuzzLength = 3
    let fuzzAmount = 0.8

    /** @type HTMLCanvasElement */ let canvas = document.getElementById("canvas1")
    /** @type CanvasRenderingContext2D */ let ctx  = canvas.getContext("2d")

    ctx.beginPath()

    let a
    let i
    let p
    let p2
    let left
    ctx.moveTo(arr[0], arr[1])
    p = [ arr[0], arr[1] ]

    let len
    let angle
    for (i=2; i<arr.length; i+=2)
    {
        p2 = [ arr[i], arr[i + 1] ]

        let done = false

        while (!done)
        {
            len = Math.sqrt(Math.pow(p[0] - p2[0], 2) + Math.pow(p[1] - p2[1], 2))
            angle = Math.atan2(p2[1] - p[1], p2[0] - p[0])

            if (len > fuzzLength)
            {
                len = fuzzLength
                angle = angle + (Math.random() - 0.5) * fuzzAmount
            }
            else
            {
                done = true
            }

            p[0] += Math.cos(angle) * len
            p[1] += Math.sin(angle) * len
            
            ctx.lineTo(p[0], p[1])
        }
    }
    // ctx.closePath()

    ctx.strokeStyle = "2px solid #000"
    ctx.fillStyle = color
    ctx.stroke()
    ctx.fill()
}
    
function drawArrayArray(arrarr, fuzzy, color)
{
    for (let arr of arrarr)
    {
        drawArrayFuzzy(arr, color)
    }
}

function drawWholeMap()
{
    drawInit()

    // land
    drawArrayArray(
        [
            [10,197, 47,157, 60,144, 69,156, 70,175, 80,191, 91,210, 103,224, 113,239, 116,256, 112,271, 115,278, 119,269, 126,251, 119,241, 124,229, 131,233, 132,241, 136,234, 131,222, 114,207, 114,203, 117,202, 117,198, 111,197, 105,194, 98,181, 96,164, 86,151, 85,137, 91,129, 101,130, 106,141, 108,149, 116,164, 120,165, 132,182, 143,200, 145,201, 143,224, 149,240, 151,252, 157,257, 153,262, 154,265, 157,262, 157,269, 164,270, 169,269, 174,273, 173,277, 176,279, 181,274, 179,269, 181,268, 184,277, 186,276, 182,264, 174,256, 172,241, 169,236, 170,227, 172,225, 174,232, 178,233, 181,238, 181,235, 180,231, 183,233, 183,230, 179,223, 182,222, 186,218, 188,220, 190,217, 197,221, 201,224, 205,227, 210,218, 215,218, 220,209, 215,203, 215,194, 211,186, 218,166, 219,146, 227,135, 229,119, 235,106, 243,97, 245,105, 250,110, 260,110, 249,123, 254,129, 260,135, 258,143, 263,148, 271,136, 283,132, 285,123, 273,124, 269,108, 285,94, 297,87, 305,85, 300,94, 294,97, 296,106, 292,124, 287,123, 285,132, 303,151, 314,171, 324,182, 328,194, 318,215, 297,219, 285,208, 265,194, 239,212, 221,211, 214,224, 202,231, 199,237, 198,247, 205,244, 202,251, 206,256, 204,265, 200,271, 208,290, 216,298, 223,302, 224,311, 231,312, 237,299, 245,300, 252,314, 262,311, 269,299, 274,306, 279,298, 279,345, 272,387, 261,406, 240,395, 222,409, 169,373, 151,380, 149,406, 139,420, 101,376, 69,357, 77,326, 70,315, 74,284, 1,301, 0,717, 0,999, 299,1000, 337,907, 382,829, 401,765, 405,726, 354,742, 347,746, 338,713, 307,662, 277,541, 262,464, 271,431, 269,458, 290,521, 305,550, 306,578, 319,605, 344,712, 395,679, 435,642, 475,561, 467,536, 448,519, 447,494, 430,518, 409,523, 380,449, 391,421, 408,462, 428,481, 451,474, 457,497, 489,509, 527,499, 544,538, 562,548, 550,556, 565,582, 580,582, 587,658, 603,728, 621,785, 638,746, 642,711, 642,675, 648,662, 659,649, 698,584, 718,568, 732,552, 743,587, 756,611, 757,661, 767,661, 780,640, 793,705, 791,782, 803,801, 808,826, 815,862, 831,889, 840,887, 833,861, 831,825, 809,794, 801,762, 802,741, 807,695, 842,751, 845,776, 862,748, 881,729, 880,672, 851,615, 852,599, 873,567, 884,569, 883,581, 887,591, 891,587, 889,576, 946,533, 967,516, 970,477, 1000,424, 999,0, 0,0, 10,197],
            [92,273, 102,276, 111,274, 109,283, 108,303, 95,293, 92,273],
            [160,274, 164,273, 170,277, 176,285, 174,295, 174,307, 170,299, 168,302, 164,295, 164,301, 160,292, 163,287, 160,274],
            [61,179, 62,193, 60,209, 57,205, 61,179],
            [55,219, 60,212, 64,228, 63,254, 56,259, 54,244, 55,219],
            [10,238, 12,244, 10,252, 10,238],
            [19,237, 19,242, 19,237],
            [199,329, 197,334, 177,329, 199,329],
            [215,307, 215,316, 212,314, 215,307],
            [255,326, 267,322, 262,336, 253,342, 255,326],
            [637,794, 642,813, 656,812, 656,786, 648,768, 637,794],
            [785,862, 801,905, 824,971, 842,997, 855,990, 854,954, 837,920, 836,904, 817,874, 804,867, 793,841, 784,827, 785,862],
            [857,954, 861,952, 854,930, 857,954],
            [867,957, 871,955, 873,948, 867,957],
            [787,899, 788,892, 787,899],
            [793,908, 793,916, 793,908],
            [798,935, 796,921, 798,935],
            [807,956, 808,953, 807,956],
            [895,883, 897,866, 913,856, 944,801, 962,826, 948,853, 961,891, 942,927, 937,966, 925,970, 920,959, 902,961, 889,952, 886,925, 879,914, 877,892, 895,883],
            [883,595, 893,593, 895,598, 891,604, 889,616, 884,623, 877,619, 883,595],
            [970,528, 969,542, 975,562, 976,559, 980,543, 984,519, 984,507, 970,528],
            [987,619, 988,646, 980,664, 984,689, 979,696, 973,692, 968,669, 987,619],
            [987,619, 988,646, 980,664, 984,689, 979,696, 973,692, 968,669, 987,619],
            [965,733, 967,746, 965,733],
            [991,773, 999,772, 999,790, 991,792, 991,773],
            [985,746, 990,745, 992,729, 985,746],
            [975,711, 968,723, 984,713, 980,701, 975,711],
            [990,701, 990,691, 1000,709, 1000,689, 991,685, 990,701],
            [990,763, 995,767, 999,748, 990,763],
            [964,928, 969,895, 977,888, 999,894, 999,904, 971,899, 970,918, 995,916, 981,938, 995,988, 991,999, 976,963, 977,948, 970,954, 972,990, 964,994, 964,962, 964,928]
        ], true, "#aaa")

    // hill 1
    drawArrayArray(
        [
            [355,319, 384,388, 421,458, 454,469, 479,500, 491,455, 486,321, 472,280, 448,264, 438,366, 388,290, 355,215, 327,205, 302,235, 274,272, 242,272, 206,264, 219,299, 244,299, 264,301, 281,281, 305,279, 355,319],
            [140,191, 148,201, 153,246, 167,260, 172,249, 165,228, 181,218, 200,210, 198,189, 154,161, 122,142, 102,114, 140,191],
            [111,232, 88,203, 94,184, 113,223, 120,251, 111,232],
            [61,182, 61,194, 60,206, 57,202, 61,182],
            [19,125, 31,94, 31,133, 33,162, 15,162, 4,170, 19,125],
            [186,82, 191,110, 172,118, 161,138, 164,143, 194,129, 205,112, 197,70, 175,38, 151,23, 129,33, 145,67], 
            [721,254, 780,239, 830,284, 835,350, 821,402, 780,450, 769,414, 745,450, 694,444, 643,398, 646,373, 632,327, 721,254], 
            [863,383, 846,455, 821,536, 786,492, 765,569, 797,665, 865,564, 921,505, 933,402, 901,341, 863,383],
            [938,189, 926,251, 957,234, 1000,169, 999,0, 1042,102, 1075,111, 1080,68, 1192,21, 938,189],
            [315,513, 333,607, 363,673, 402,649, 377,689, 345,707, 313,581, 307,546, 271,451, 315,513],
            [265,745, 267,868, 332,798, 315,724, 265,745],
            [533,327, 541,363, 569,345, 561,444, 535,509, 530,493, 487,498, 509,449, 524,414, 492,374, 498,336, 533,327]
        ], true, "#888")

    // hill 2
    drawArrayArray(
        [
            [651,105, 664,131, 629,153, 651,105],
            [44,136, 51,117, 68,119, 96,113, 111,95, 111,69, 69,75, 44,95, 31,124, 33,153, 44,136],
            [86,153, 85,165, 69,156, 86,153],
            [354,176, 383,201, 390,225, 353,196, 325,184, 309,161, 354,176],
            [583,178, 631,171, 666,148, 709,169, 697,195, 648,204, 600,247, 626,295, 645,305, 620,320, 642,373, 630,388, 691,451, 747,453, 769,417, 757,469, 705,482, 632,427, 592,365, 563,331, 539,343, 541,321, 570,289, 534,261, 583,178],
            [711,78, 746,116, 814,152, 840,161, 786,112, 740,52, 732,1, 711,78],
            [777,454, 790,445, 820,407, 840,348, 855,380, 832,454, 822,529, 787,474, 758,530, 757,585, 764,625, 752,600, 777,454]
        ], true, "#444")
        
}